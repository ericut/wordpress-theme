!function(root,factory){"function"==typeof define&&define.amd?define(factory):"object"==typeof exports?module.exports=factory():root.ScrollMagic=factory()}(this,function(){"use strict";var ScrollMagic=function(){_util.log(2,"(COMPATIBILITY NOTICE) -> As of ScrollMagic 2.0.0 you need to use 'new ScrollMagic.Controller()' to create a new controller instance. Use 'new ScrollMagic.Scene()' to instance a scene.")};ScrollMagic.version="2.0.5",window.addEventListener("mousewheel",function(){});var PIN_SPACER_ATTRIBUTE="data-scrollmagic-pin-spacer";ScrollMagic.Controller=function(options){var NAMESPACE="ScrollMagic.Controller",SCROLL_DIRECTION_FORWARD="FORWARD",SCROLL_DIRECTION_REVERSE="REVERSE",SCROLL_DIRECTION_PAUSED="PAUSED",DEFAULT_OPTIONS=CONTROLLER_OPTIONS.defaults,Controller=this,_options=_util.extend({},DEFAULT_OPTIONS,options),_sceneObjects=[],_updateScenesOnNextCycle=!1,_scrollPos=0,_scrollDirection="PAUSED",_isDocument=!0,_viewPortSize=0,_enabled=!0,_updateTimeout,_refreshTimeout,construct=function(){for(var key in _options)DEFAULT_OPTIONS.hasOwnProperty(key)||(log(2,'WARNING: Unknown option "'+key+'"'),delete _options[key]);if(_options.container=_util.get.elements(_options.container)[0],!_options.container)throw log(1,"ERROR creating object "+NAMESPACE+": No valid scroll container supplied"),NAMESPACE+" init failed.";(_isDocument=_options.container===window||_options.container===document.body||!document.body.contains(_options.container))&&(_options.container=window),_viewPortSize=getViewportSize(),_options.container.addEventListener("resize",onChange),_options.container.addEventListener("scroll",onChange),_options.refreshInterval=parseInt(_options.refreshInterval)||DEFAULT_OPTIONS.refreshInterval,scheduleRefresh(),log(3,"added new "+NAMESPACE+" controller (v"+ScrollMagic.version+")")},scheduleRefresh=function(){_options.refreshInterval>0&&(_refreshTimeout=window.setTimeout(refresh,_options.refreshInterval))},getScrollPos=function(){return _options.vertical?_util.get.scrollTop(_options.container):_util.get.scrollLeft(_options.container)},getViewportSize=function(){return _options.vertical?_util.get.height(_options.container):_util.get.width(_options.container)},setScrollPos=this._setScrollPos=function(pos){_options.vertical?_isDocument?window.scrollTo(_util.get.scrollLeft(),pos):_options.container.scrollTop=pos:_isDocument?window.scrollTo(pos,_util.get.scrollTop()):_options.container.scrollLeft=pos},updateScenes=function(){if(_enabled&&_updateScenesOnNextCycle){var scenesToUpdate=_util.type.Array(_updateScenesOnNextCycle)?_updateScenesOnNextCycle:_sceneObjects.slice(0);_updateScenesOnNextCycle=!1;var oldScrollPos=_scrollPos,deltaScroll=(_scrollPos=Controller.scrollPos())-oldScrollPos;0!==deltaScroll&&(_scrollDirection=deltaScroll>0?"FORWARD":"REVERSE"),"REVERSE"===_scrollDirection&&scenesToUpdate.reverse(),scenesToUpdate.forEach(function(scene,index){log(3,"updating Scene "+(index+1)+"/"+scenesToUpdate.length+" ("+_sceneObjects.length+" total)"),scene.update(!0)}),0===scenesToUpdate.length&&_options.loglevel>=3&&log(3,"updating 0 Scenes (nothing added to controller)")}},debounceUpdate=function(){_updateTimeout=_util.rAF(updateScenes)},onChange=function(e){log(3,"event fired causing an update:",e.type),"resize"==e.type&&(_viewPortSize=getViewportSize(),_scrollDirection="PAUSED"),!0!==_updateScenesOnNextCycle&&(_updateScenesOnNextCycle=!0,debounceUpdate())},refresh=function(){if(!_isDocument&&_viewPortSize!=getViewportSize()){var resizeEvent;try{resizeEvent=new Event("resize",{bubbles:!1,cancelable:!1})}catch(e){(resizeEvent=document.createEvent("Event")).initEvent("resize",!1,!1)}_options.container.dispatchEvent(resizeEvent)}_sceneObjects.forEach(function(scene,index){scene.refresh()}),scheduleRefresh()},log=this._log=function(loglevel,output){_options.loglevel>=loglevel&&(Array.prototype.splice.call(arguments,1,0,"("+NAMESPACE+") ->"),_util.log.apply(window,arguments))};this._options=_options;var sortScenes=function(ScenesArray){if(ScenesArray.length<=1)return ScenesArray;var scenes=ScenesArray.slice(0);return scenes.sort(function(a,b){return a.scrollOffset()>b.scrollOffset()?1:-1}),scenes};return this.addScene=function(newScene){if(_util.type.Array(newScene))newScene.forEach(function(scene,index){Controller.addScene(scene)});else if(newScene instanceof ScrollMagic.Scene){if(newScene.controller()!==Controller)newScene.addTo(Controller);else if(_sceneObjects.indexOf(newScene)<0){for(var key in _sceneObjects.push(newScene),_sceneObjects=sortScenes(_sceneObjects),newScene.on("shift.controller_sort",function(){_sceneObjects=sortScenes(_sceneObjects)}),_options.globalSceneOptions)newScene[key]&&newScene[key].call(newScene,_options.globalSceneOptions[key]);log(3,"adding Scene (now "+_sceneObjects.length+" total)")}}else log(1,"ERROR: invalid argument supplied for '.addScene()'");return Controller},this.removeScene=function(Scene){if(_util.type.Array(Scene))Scene.forEach(function(scene,index){Controller.removeScene(scene)});else{var index=_sceneObjects.indexOf(Scene);index>-1&&(Scene.off("shift.controller_sort"),_sceneObjects.splice(index,1),log(3,"removing Scene (now "+_sceneObjects.length+" left)"),Scene.remove())}return Controller},this.updateScene=function(Scene,immediately){return _util.type.Array(Scene)?Scene.forEach(function(scene,index){Controller.updateScene(scene,immediately)}):immediately?Scene.update(!0):!0!==_updateScenesOnNextCycle&&Scene instanceof ScrollMagic.Scene&&(-1==(_updateScenesOnNextCycle=_updateScenesOnNextCycle||[]).indexOf(Scene)&&_updateScenesOnNextCycle.push(Scene),_updateScenesOnNextCycle=sortScenes(_updateScenesOnNextCycle),debounceUpdate()),Controller},this.update=function(immediately){return onChange({type:"resize"}),immediately&&updateScenes(),Controller},this.scrollTo=function(scrollTarget,additionalParameter){if(_util.type.Number(scrollTarget))setScrollPos.call(_options.container,scrollTarget,additionalParameter);else if(scrollTarget instanceof ScrollMagic.Scene)scrollTarget.controller()===Controller?Controller.scrollTo(scrollTarget.scrollOffset(),additionalParameter):log(2,"scrollTo(): The supplied scene does not belong to this controller. Scroll cancelled.",scrollTarget);else if(_util.type.Function(scrollTarget))setScrollPos=scrollTarget;else{var elem=_util.get.elements(scrollTarget)[0];if(elem){for(;elem.parentNode.hasAttribute(PIN_SPACER_ATTRIBUTE);)elem=elem.parentNode;var param=_options.vertical?"top":"left",containerOffset=_util.get.offset(_options.container),elementOffset=_util.get.offset(elem);_isDocument||(containerOffset[param]-=Controller.scrollPos()),Controller.scrollTo(elementOffset[param]-containerOffset[param],additionalParameter)}else log(2,"scrollTo(): The supplied argument is invalid. Scroll cancelled.",scrollTarget)}return Controller},this.scrollPos=function(scrollPosMethod){return arguments.length?(_util.type.Function(scrollPosMethod)?getScrollPos=scrollPosMethod:log(2,"Provided value for method 'scrollPos' is not a function. To change the current scroll position use 'scrollTo()'."),Controller):getScrollPos.call(Controller)},this.info=function(about){var values={size:_viewPortSize,vertical:_options.vertical,scrollPos:_scrollPos,scrollDirection:_scrollDirection,container:_options.container,isDocument:_isDocument};return arguments.length?void 0!==values[about]?values[about]:void log(1,'ERROR: option "'+about+'" is not available'):values},this.loglevel=function(newLoglevel){return arguments.length?(_options.loglevel!=newLoglevel&&(_options.loglevel=newLoglevel),Controller):_options.loglevel},this.enabled=function(newState){return arguments.length?(_enabled!=newState&&(_enabled=!!newState,Controller.updateScene(_sceneObjects,!0)),Controller):_enabled},this.destroy=function(resetScenes){window.clearTimeout(_refreshTimeout);for(var i=_sceneObjects.length;i--;)_sceneObjects[i].destroy(resetScenes);return _options.container.removeEventListener("resize",onChange),_options.container.removeEventListener("scroll",onChange),_util.cAF(_updateTimeout),log(3,"destroyed "+NAMESPACE+" (reset: "+(resetScenes?"true":"false")+")"),null},construct(),Controller};var CONTROLLER_OPTIONS={defaults:{container:window,vertical:!0,globalSceneOptions:{},loglevel:2,refreshInterval:100}};ScrollMagic.Controller.addOption=function(name,defaultValue){CONTROLLER_OPTIONS.defaults[name]=defaultValue},ScrollMagic.Controller.extend=function(extension){var oldClass=this;ScrollMagic.Controller=function(){return oldClass.apply(this,arguments),this.$super=_util.extend({},this),extension.apply(this,arguments)||this},_util.extend(ScrollMagic.Controller,oldClass),ScrollMagic.Controller.prototype=oldClass.prototype,ScrollMagic.Controller.prototype.constructor=ScrollMagic.Controller},ScrollMagic.Scene=function(options){var NAMESPACE="ScrollMagic.Scene",SCENE_STATE_BEFORE="BEFORE",SCENE_STATE_DURING="DURING",SCENE_STATE_AFTER="AFTER",DEFAULT_OPTIONS=SCENE_OPTIONS.defaults,Scene=this,_options=_util.extend({},DEFAULT_OPTIONS,options),_state="BEFORE",_progress=0,_scrollOffset={start:0,end:0},_triggerPos=0,_enabled=!0,_durationUpdateMethod,_controller,construct=function(){for(var key in _options)DEFAULT_OPTIONS.hasOwnProperty(key)||(log(2,'WARNING: Unknown option "'+key+'"'),delete _options[key]);for(var optionName in DEFAULT_OPTIONS)addSceneOption(optionName);validateOption()},_listeners={};this.on=function(names,callback){return _util.type.Function(callback)?(names=names.trim().split(" ")).forEach(function(fullname){var nameparts=fullname.split("."),eventname=nameparts[0],namespace=nameparts[1];"*"!=eventname&&(_listeners[eventname]||(_listeners[eventname]=[]),_listeners[eventname].push({namespace:namespace||"",callback:callback}))}):log(1,"ERROR when calling '.on()': Supplied callback for '"+names+"' is not a valid function!"),Scene},this.off=function(names,callback){return names?((names=names.trim().split(" ")).forEach(function(fullname,key){var nameparts=fullname.split("."),eventname=nameparts[0],namespace=nameparts[1]||"",removeList;("*"===eventname?Object.keys(_listeners):[eventname]).forEach(function(remove){for(var list=_listeners[remove]||[],i=list.length;i--;){var listener=list[i];!listener||namespace!==listener.namespace&&"*"!==namespace||callback&&callback!=listener.callback||list.splice(i,1)}list.length||delete _listeners[remove]})}),Scene):(log(1,"ERROR: Invalid event name supplied."),Scene)},this.trigger=function(name,vars){if(name){var nameparts=name.trim().split("."),eventname=nameparts[0],namespace=nameparts[1],listeners=_listeners[eventname];log(3,"event fired:",eventname,vars?"->":"",vars||""),listeners&&listeners.forEach(function(listener,key){namespace&&namespace!==listener.namespace||listener.callback.call(Scene,new ScrollMagic.Event(eventname,listener.namespace,Scene,vars))})}else log(1,"ERROR: Invalid event name supplied.");return Scene},Scene.on("change.internal",function(e){"loglevel"!==e.what&&"tweenChanges"!==e.what&&("triggerElement"===e.what?updateTriggerElementPosition():"reverse"===e.what&&Scene.update())}).on("shift.internal",function(e){updateScrollOffset(),Scene.update()});var log=this._log=function(loglevel,output){_options.loglevel>=loglevel&&(Array.prototype.splice.call(arguments,1,0,"("+NAMESPACE+") ->"),_util.log.apply(window,arguments))};this.addTo=function(controller){return controller instanceof ScrollMagic.Controller?_controller!=controller&&(_controller&&_controller.removeScene(Scene),_controller=controller,validateOption(),updateDuration(!0),updateTriggerElementPosition(!0),updateScrollOffset(),_controller.info("container").addEventListener("resize",onContainerResize),controller.addScene(Scene),Scene.trigger("add",{controller:_controller}),log(3,"added "+NAMESPACE+" to controller"),Scene.update()):log(1,"ERROR: supplied argument of 'addTo()' is not a valid ScrollMagic Controller"),Scene},this.enabled=function(newState){return arguments.length?(_enabled!=newState&&(_enabled=!!newState,Scene.update(!0)),Scene):_enabled},this.remove=function(){if(_controller){_controller.info("container").removeEventListener("resize",onContainerResize);var tmpParent=_controller;_controller=void 0,tmpParent.removeScene(Scene),Scene.trigger("remove"),log(3,"removed "+NAMESPACE+" from controller")}return Scene},this.destroy=function(reset){return Scene.trigger("destroy",{reset:reset}),Scene.remove(),Scene.off("*.*"),log(3,"destroyed "+NAMESPACE+" (reset: "+(reset?"true":"false")+")"),null},this.update=function(immediately){if(_controller)if(immediately)if(_controller.enabled()&&_enabled){var scrollPos=_controller.info("scrollPos"),newProgress;newProgress=_options.duration>0?(scrollPos-_scrollOffset.start)/(_scrollOffset.end-_scrollOffset.start):scrollPos>=_scrollOffset.start?1:0,Scene.trigger("update",{startPos:_scrollOffset.start,endPos:_scrollOffset.end,scrollPos:scrollPos}),Scene.progress(newProgress)}else _pin&&"DURING"===_state&&updatePinState(!0);else _controller.updateScene(Scene,!1);return Scene},this.refresh=function(){return updateDuration(),updateTriggerElementPosition(),Scene},this.progress=function(progress){if(arguments.length){var doUpdate=!1,oldState=_state,scrollDirection=_controller?_controller.info("scrollDirection"):"PAUSED",reverseOrForward=_options.reverse||progress>=_progress;if(0===_options.duration?(doUpdate=_progress!=progress,_state=0===(_progress=progress<1&&reverseOrForward?0:1)?"BEFORE":"DURING"):progress<0&&"BEFORE"!==_state&&reverseOrForward?(_progress=0,_state="BEFORE",doUpdate=!0):progress>=0&&progress<1&&reverseOrForward?(_progress=progress,_state="DURING",doUpdate=!0):progress>=1&&"AFTER"!==_state?(_progress=1,_state="AFTER",doUpdate=!0):"DURING"!==_state||reverseOrForward||updatePinState(),doUpdate){var eventVars={progress:_progress,state:_state,scrollDirection:scrollDirection},stateChanged=_state!=oldState,trigger=function(eventName){Scene.trigger(eventName,eventVars)};stateChanged&&"DURING"!==oldState&&(trigger("enter"),trigger("BEFORE"===oldState?"start":"end")),trigger("progress"),stateChanged&&"DURING"!==_state&&(trigger("BEFORE"===_state?"start":"end"),trigger("leave"))}return Scene}return _progress};var updateScrollOffset=function(){_scrollOffset={start:_triggerPos+_options.offset},_controller&&_options.triggerElement&&(_scrollOffset.start-=_controller.info("size")*_options.triggerHook),_scrollOffset.end=_scrollOffset.start+_options.duration},updateDuration=function(suppressEvents){if(_durationUpdateMethod){var varname="duration";changeOption(varname,_durationUpdateMethod.call(Scene))&&!suppressEvents&&(Scene.trigger("change",{what:varname,newval:_options.duration}),Scene.trigger("shift",{reason:varname}))}},updateTriggerElementPosition=function(suppressEvents){var elementPos=0,telem=_options.triggerElement;if(_controller&&telem){for(var controllerInfo=_controller.info(),containerOffset=_util.get.offset(controllerInfo.container),param=controllerInfo.vertical?"top":"left";telem.parentNode.hasAttribute(PIN_SPACER_ATTRIBUTE);)telem=telem.parentNode;var elementOffset=_util.get.offset(telem);controllerInfo.isDocument||(containerOffset[param]-=_controller.scrollPos()),elementPos=elementOffset[param]-containerOffset[param]}var changed=elementPos!=_triggerPos;_triggerPos=elementPos,changed&&!suppressEvents&&Scene.trigger("shift",{reason:"triggerElementPosition"})},onContainerResize=function(e){_options.triggerHook>0&&Scene.trigger("shift",{reason:"containerResize"})},_validate=_util.extend(SCENE_OPTIONS.validate,{duration:function(val){if(_util.type.String(val)&&val.match(/^(\.|\d)*\d+%$/)){var perc=parseFloat(val)/100;val=function(){return _controller?_controller.info("size")*perc:0}}if(_util.type.Function(val)){_durationUpdateMethod=val;try{val=parseFloat(_durationUpdateMethod())}catch(e){val=-1}}if(val=parseFloat(val),!_util.type.Number(val)||val<0)throw _durationUpdateMethod?(_durationUpdateMethod=void 0,['Invalid return value of supplied function for option "duration":',val]):['Invalid value for option "duration":',val];return val}}),validateOption=function(check){(check=arguments.length?[check]:Object.keys(_validate)).forEach(function(optionName,key){var value;if(_validate[optionName])try{value=_validate[optionName](_options[optionName])}catch(e){value=DEFAULT_OPTIONS[optionName];var logMSG=_util.type.String(e)?[e]:e;_util.type.Array(logMSG)?(logMSG[0]="ERROR: "+logMSG[0],logMSG.unshift(1),log.apply(this,logMSG)):log(1,"ERROR: Problem executing validation callback for option '"+optionName+"':",e.message)}finally{_options[optionName]=value}})},changeOption=function(varname,newval){var changed=!1,oldval=_options[varname];return _options[varname]!=newval&&(_options[varname]=newval,validateOption(varname),changed=oldval!=_options[varname]),changed},addSceneOption=function(optionName){Scene[optionName]||(Scene[optionName]=function(newVal){return arguments.length?("duration"===optionName&&(_durationUpdateMethod=void 0),changeOption(optionName,newVal)&&(Scene.trigger("change",{what:optionName,newval:_options[optionName]}),SCENE_OPTIONS.shifts.indexOf(optionName)>-1&&Scene.trigger("shift",{reason:optionName})),Scene):_options[optionName]})},_pin,_pinOptions;this.controller=function(){return _controller},this.state=function(){return _state},this.scrollOffset=function(){return _scrollOffset.start},this.triggerPosition=function(){var pos=_options.offset;return _controller&&(_options.triggerElement?pos+=_triggerPos:pos+=_controller.info("size")*Scene.triggerHook()),pos},Scene.on("shift.internal",function(e){var durationChanged="duration"===e.reason;("AFTER"===_state&&durationChanged||"DURING"===_state&&0===_options.duration)&&updatePinState(),durationChanged&&updatePinDimensions()}).on("progress.internal",function(e){updatePinState()}).on("add.internal",function(e){updatePinDimensions()}).on("destroy.internal",function(e){Scene.removePin(e.reset)});var updatePinState=function(forceUnpin){if(_pin&&_controller){var containerInfo=_controller.info(),pinTarget=_pinOptions.spacer.firstChild;if(forceUnpin||"DURING"!==_state){var newCSS={position:_pinOptions.inFlow?"relative":"absolute",top:0,left:0},change=_util.css(pinTarget,"position")!=newCSS.position;_pinOptions.pushFollowers?_options.duration>0&&("AFTER"===_state&&0===parseFloat(_util.css(_pinOptions.spacer,"padding-top"))?change=!0:"BEFORE"===_state&&0===parseFloat(_util.css(_pinOptions.spacer,"padding-bottom"))&&(change=!0)):newCSS[containerInfo.vertical?"top":"left"]=_options.duration*_progress,_util.css(pinTarget,newCSS),change&&updatePinDimensions()}else{"fixed"!=_util.css(pinTarget,"position")&&(_util.css(pinTarget,{position:"fixed"}),updatePinDimensions());var fixedPos=_util.get.offset(_pinOptions.spacer,!0),scrollDistance=_options.reverse||0===_options.duration?containerInfo.scrollPos-_scrollOffset.start:Math.round(_progress*_options.duration*10)/10;fixedPos[containerInfo.vertical?"top":"left"]+=scrollDistance,_util.css(_pinOptions.spacer.firstChild,{top:fixedPos.top,left:fixedPos.left})}}},updatePinDimensions=function(){if(_pin&&_controller&&_pinOptions.inFlow){var after="AFTER"===_state,before="BEFORE"===_state,during="DURING"===_state,vertical=_controller.info("vertical"),pinTarget=_pinOptions.spacer.firstChild,marginCollapse=_util.isMarginCollapseType(_util.css(_pinOptions.spacer,"display")),css={};_pinOptions.relSize.width||_pinOptions.relSize.autoFullWidth?during?_util.css(_pin,{width:_util.get.width(_pinOptions.spacer)}):_util.css(_pin,{width:"100%"}):(css["min-width"]=_util.get.width(vertical?_pin:pinTarget,!0,!0),css.width=during?css["min-width"]:"auto"),_pinOptions.relSize.height?during?_util.css(_pin,{height:_util.get.height(_pinOptions.spacer)-(_pinOptions.pushFollowers?_options.duration:0)}):_util.css(_pin,{height:"100%"}):(css["min-height"]=_util.get.height(vertical?pinTarget:_pin,!0,!marginCollapse),css.height=during?css["min-height"]:"auto"),_pinOptions.pushFollowers&&(css["padding"+(vertical?"Top":"Left")]=_options.duration*_progress,css["padding"+(vertical?"Bottom":"Right")]=_options.duration*(1-_progress)),_util.css(_pinOptions.spacer,css)}},updatePinInContainer=function(){_controller&&_pin&&"DURING"===_state&&!_controller.info("isDocument")&&updatePinState()},updateRelativePinSpacer=function(){_controller&&_pin&&"DURING"===_state&&((_pinOptions.relSize.width||_pinOptions.relSize.autoFullWidth)&&_util.get.width(window)!=_util.get.width(_pinOptions.spacer.parentNode)||_pinOptions.relSize.height&&_util.get.height(window)!=_util.get.height(_pinOptions.spacer.parentNode))&&updatePinDimensions()},onMousewheelOverPin=function(e){_controller&&_pin&&"DURING"===_state&&!_controller.info("isDocument")&&(e.preventDefault(),_controller._setScrollPos(_controller.info("scrollPos")-((e.wheelDelta||e[_controller.info("vertical")?"wheelDeltaY":"wheelDeltaX"])/3||30*-e.detail)))};this.setPin=function(element,settings){var defaultSettings={pushFollowers:!0,spacerClass:"scrollmagic-pin-spacer"};if(settings=_util.extend({},defaultSettings,settings),!(element=_util.get.elements(element)[0]))return log(1,"ERROR calling method 'setPin()': Invalid pin element supplied."),Scene;if("fixed"===_util.css(element,"position"))return log(1,"ERROR calling method 'setPin()': Pin does not work with elements that are positioned 'fixed'."),Scene;if(_pin){if(_pin===element)return Scene;Scene.removePin()}var parentDisplay=(_pin=element).parentNode.style.display,boundsParams=["top","left","bottom","right","margin","marginLeft","marginRight","marginTop","marginBottom"];_pin.parentNode.style.display="none";var inFlow="absolute"!=_util.css(_pin,"position"),pinCSS=_util.css(_pin,boundsParams.concat(["display"])),sizeCSS=_util.css(_pin,["width","height"]);_pin.parentNode.style.display=parentDisplay,!inFlow&&settings.pushFollowers&&(log(2,"WARNING: If the pinned element is positioned absolutely pushFollowers will be disabled."),settings.pushFollowers=!1),window.setTimeout(function(){_pin&&0===_options.duration&&settings.pushFollowers&&log(2,"WARNING: pushFollowers =",!0,"has no effect, when scene duration is 0.")},0);var spacer=_pin.parentNode.insertBefore(document.createElement("div"),_pin),spacerCSS=_util.extend(pinCSS,{position:inFlow?"relative":"absolute",boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"});if(inFlow||_util.extend(spacerCSS,_util.css(_pin,["width","height"])),_util.css(spacer,spacerCSS),spacer.setAttribute(PIN_SPACER_ATTRIBUTE,""),_util.addClass(spacer,settings.spacerClass),_pinOptions={spacer:spacer,relSize:{width:"%"===sizeCSS.width.slice(-1),height:"%"===sizeCSS.height.slice(-1),autoFullWidth:"auto"===sizeCSS.width&&inFlow&&_util.isMarginCollapseType(pinCSS.display)},pushFollowers:settings.pushFollowers,inFlow:inFlow},!_pin.___origStyle){_pin.___origStyle={};var pinInlineCSS=_pin.style,copyStyles;boundsParams.concat(["width","height","position","boxSizing","mozBoxSizing","webkitBoxSizing"]).forEach(function(val){_pin.___origStyle[val]=pinInlineCSS[val]||""})}return _pinOptions.relSize.width&&_util.css(spacer,{width:sizeCSS.width}),_pinOptions.relSize.height&&_util.css(spacer,{height:sizeCSS.height}),spacer.appendChild(_pin),_util.css(_pin,{position:inFlow?"relative":"absolute",margin:"auto",top:"auto",left:"auto",bottom:"auto",right:"auto"}),(_pinOptions.relSize.width||_pinOptions.relSize.autoFullWidth)&&_util.css(_pin,{boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"}),window.addEventListener("scroll",updatePinInContainer),window.addEventListener("resize",updatePinInContainer),window.addEventListener("resize",updateRelativePinSpacer),_pin.addEventListener("mousewheel",onMousewheelOverPin),_pin.addEventListener("DOMMouseScroll",onMousewheelOverPin),log(3,"added pin"),updatePinState(),Scene},this.removePin=function(reset){if(_pin){if("DURING"===_state&&updatePinState(!0),reset||!_controller){var pinTarget=_pinOptions.spacer.firstChild;if(pinTarget.hasAttribute(PIN_SPACER_ATTRIBUTE)){var style=_pinOptions.spacer.style,values;margins={},["margin","marginLeft","marginRight","marginTop","marginBottom"].forEach(function(val){margins[val]=style[val]||""}),_util.css(pinTarget,margins)}_pinOptions.spacer.parentNode.insertBefore(pinTarget,_pinOptions.spacer),_pinOptions.spacer.parentNode.removeChild(_pinOptions.spacer),_pin.parentNode.hasAttribute(PIN_SPACER_ATTRIBUTE)||(_util.css(_pin,_pin.___origStyle),delete _pin.___origStyle)}window.removeEventListener("scroll",updatePinInContainer),window.removeEventListener("resize",updatePinInContainer),window.removeEventListener("resize",updateRelativePinSpacer),_pin.removeEventListener("mousewheel",onMousewheelOverPin),_pin.removeEventListener("DOMMouseScroll",onMousewheelOverPin),_pin=void 0,log(3,"removed pin (reset: "+(reset?"true":"false")+")")}return Scene};var _cssClasses,_cssClassElems=[];return Scene.on("destroy.internal",function(e){Scene.removeClassToggle(e.reset)}),this.setClassToggle=function(element,classes){var elems=_util.get.elements(element);return 0!==elems.length&&_util.type.String(classes)?(_cssClassElems.length>0&&Scene.removeClassToggle(),_cssClasses=classes,_cssClassElems=elems,Scene.on("enter.internal_class leave.internal_class",function(e){var toggle="enter"===e.type?_util.addClass:_util.removeClass;_cssClassElems.forEach(function(elem,key){toggle(elem,_cssClasses)})}),Scene):(log(1,"ERROR calling method 'setClassToggle()': Invalid "+(0===elems.length?"element":"classes")+" supplied."),Scene)},this.removeClassToggle=function(reset){return reset&&_cssClassElems.forEach(function(elem,key){_util.removeClass(elem,_cssClasses)}),Scene.off("start.internal_class end.internal_class"),_cssClasses=void 0,_cssClassElems=[],Scene},construct(),Scene};var SCENE_OPTIONS={defaults:{duration:0,offset:0,triggerElement:void 0,triggerHook:.5,reverse:!0,loglevel:2},validate:{offset:function(val){if(val=parseFloat(val),!_util.type.Number(val))throw['Invalid value for option "offset":',val];return val},triggerElement:function(val){if(val=val||void 0){var elem=_util.get.elements(val)[0];if(!elem)throw['Element defined in option "triggerElement" was not found:',val];val=elem}return val},triggerHook:function(val){var translate={onCenter:.5,onEnter:1,onLeave:0};if(_util.type.Number(val))val=Math.max(0,Math.min(parseFloat(val),1));else{if(!(val in translate))throw['Invalid value for option "triggerHook": ',val];val=translate[val]}return val},reverse:function(val){return!!val},loglevel:function(val){if(val=parseInt(val),!_util.type.Number(val)||val<0||val>3)throw['Invalid value for option "loglevel":',val];return val}},shifts:["duration","offset","triggerHook"]};ScrollMagic.Scene.addOption=function(name,defaultValue,validationCallback,shifts){name in SCENE_OPTIONS.defaults?ScrollMagic._util.log(1,"[static] ScrollMagic.Scene -> Cannot add Scene option '"+name+"', because it already exists."):(SCENE_OPTIONS.defaults[name]=defaultValue,SCENE_OPTIONS.validate[name]=validationCallback,shifts&&SCENE_OPTIONS.shifts.push(name))},ScrollMagic.Scene.extend=function(extension){var oldClass=this;ScrollMagic.Scene=function(){return oldClass.apply(this,arguments),this.$super=_util.extend({},this),extension.apply(this,arguments)||this},_util.extend(ScrollMagic.Scene,oldClass),ScrollMagic.Scene.prototype=oldClass.prototype,ScrollMagic.Scene.prototype.constructor=ScrollMagic.Scene},ScrollMagic.Event=function(type,namespace,target,vars){for(var key in vars=vars||{})this[key]=vars[key];return this.type=type,this.target=this.currentTarget=target,this.namespace=namespace||"",this.timeStamp=this.timestamp=Date.now(),this};var _util=ScrollMagic._util=function(window){var U={},i,floatval=function(number){return parseFloat(number)||0},_getComputedStyle=function(elem){return elem.currentStyle?elem.currentStyle:window.getComputedStyle(elem)},_dimension=function(which,elem,outer,includeMargin){if((elem=elem===document?window:elem)===window)includeMargin=!1;else if(!_type.DomElement(elem))return 0;which=which.charAt(0).toUpperCase()+which.substr(1).toLowerCase();var dimension=(outer?elem["offset"+which]||elem["outer"+which]:elem["client"+which]||elem["inner"+which])||0;if(outer&&includeMargin){var style=_getComputedStyle(elem);dimension+="Height"===which?floatval(style.marginTop)+floatval(style.marginBottom):floatval(style.marginLeft)+floatval(style.marginRight)}return dimension},_camelCase=function(str){return str.replace(/^[^a-z]+([a-z])/g,"$1").replace(/-([a-z])/g,function(g){return g[1].toUpperCase()})};U.extend=function(obj){for(obj=obj||{},i=1;i<arguments.length;i++)if(arguments[i])for(var key in arguments[i])arguments[i].hasOwnProperty(key)&&(obj[key]=arguments[i][key]);return obj},U.isMarginCollapseType=function(str){return["block","flex","list-item","table","-webkit-box"].indexOf(str)>-1};var lastTime=0,vendors=["ms","moz","webkit","o"],_requestAnimationFrame=window.requestAnimationFrame,_cancelAnimationFrame=window.cancelAnimationFrame;for(i=0;!_requestAnimationFrame&&i<vendors.length;++i)_requestAnimationFrame=window[vendors[i]+"RequestAnimationFrame"],_cancelAnimationFrame=window[vendors[i]+"CancelAnimationFrame"]||window[vendors[i]+"CancelRequestAnimationFrame"];_requestAnimationFrame||(_requestAnimationFrame=function(callback){var currTime=(new Date).getTime(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=window.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);return lastTime=currTime+timeToCall,id}),_cancelAnimationFrame||(_cancelAnimationFrame=function(id){window.clearTimeout(id)}),U.rAF=_requestAnimationFrame.bind(window),U.cAF=_cancelAnimationFrame.bind(window);var loglevels=["error","warn","log"],console=window.console||{};for(console.log=console.log||function(){},i=0;i<loglevels.length;i++){var method=loglevels[i];console[method]||(console[method]=console.log)}U.log=function(loglevel){(loglevel>loglevels.length||loglevel<=0)&&(loglevel=loglevels.length);var now=new Date,time=("0"+now.getHours()).slice(-2)+":"+("0"+now.getMinutes()).slice(-2)+":"+("0"+now.getSeconds()).slice(-2)+":"+("00"+now.getMilliseconds()).slice(-3),method=loglevels[loglevel-1],args=Array.prototype.splice.call(arguments,1),func=Function.prototype.bind.call(console[method],console);args.unshift(time),func.apply(console,args)};var _type=U.type=function(v){return Object.prototype.toString.call(v).replace(/^\[object (.+)\]$/,"$1").toLowerCase()};_type.String=function(v){return"string"===_type(v)},_type.Function=function(v){return"function"===_type(v)},_type.Array=function(v){return Array.isArray(v)},_type.Number=function(v){return!_type.Array(v)&&v-parseFloat(v)+1>=0},_type.DomElement=function(o){return"object"==typeof HTMLElement?o instanceof HTMLElement:o&&"object"==typeof o&&null!==o&&1===o.nodeType&&"string"==typeof o.nodeName};var _get=U.get={};return _get.elements=function(selector){var arr=[];if(_type.String(selector))try{selector=document.querySelectorAll(selector)}catch(e){return arr}if("nodelist"===_type(selector)||_type.Array(selector))for(var i=0,ref=arr.length=selector.length;i<ref;i++){var elem=selector[i];arr[i]=_type.DomElement(elem)?elem:_get.elements(elem)}else(_type.DomElement(selector)||selector===document||selector===window)&&(arr=[selector]);return arr},_get.scrollTop=function(elem){return elem&&"number"==typeof elem.scrollTop?elem.scrollTop:window.pageYOffset||0},_get.scrollLeft=function(elem){return elem&&"number"==typeof elem.scrollLeft?elem.scrollLeft:window.pageXOffset||0},_get.width=function(elem,outer,includeMargin){return _dimension("width",elem,outer,includeMargin)},_get.height=function(elem,outer,includeMargin){return _dimension("height",elem,outer,includeMargin)},_get.offset=function(elem,relativeToViewport){var offset={top:0,left:0};if(elem&&elem.getBoundingClientRect){var rect=elem.getBoundingClientRect();offset.top=rect.top,offset.left=rect.left,relativeToViewport||(offset.top+=_get.scrollTop(),offset.left+=_get.scrollLeft())}return offset},U.addClass=function(elem,classname){classname&&(elem.classList?elem.classList.add(classname):elem.className+=" "+classname)},U.removeClass=function(elem,classname){classname&&(elem.classList?elem.classList.remove(classname):elem.className=elem.className.replace(new RegExp("(^|\\b)"+classname.split(" ").join("|")+"(\\b|$)","gi")," "))},U.css=function(elem,options){if(_type.String(options))return _getComputedStyle(elem)[_camelCase(options)];if(_type.Array(options)){var obj={},style=_getComputedStyle(elem);return options.forEach(function(option,key){obj[option]=style[_camelCase(option)]}),obj}for(var option in options){var val=options[option];val==parseFloat(val)&&(val+="px"),elem.style[_camelCase(option)]=val}},U}(window||{});return ScrollMagic.Scene.prototype.addIndicators=function(){return ScrollMagic._util.log(1,"(ScrollMagic.Scene) -> ERROR calling addIndicators() due to missing Plugin 'debug.addIndicators'. Please make sure to include plugins/debug.addIndicators.js"),this},ScrollMagic.Scene.prototype.removeIndicators=function(){return ScrollMagic._util.log(1,"(ScrollMagic.Scene) -> ERROR calling removeIndicators() due to missing Plugin 'debug.addIndicators'. Please make sure to include plugins/debug.addIndicators.js"),this},ScrollMagic.Scene.prototype.setTween=function(){return ScrollMagic._util.log(1,"(ScrollMagic.Scene) -> ERROR calling setTween() due to missing Plugin 'animation.gsap'. Please make sure to include plugins/animation.gsap.js"),this},ScrollMagic.Scene.prototype.removeTween=function(){return ScrollMagic._util.log(1,"(ScrollMagic.Scene) -> ERROR calling removeTween() due to missing Plugin 'animation.gsap'. Please make sure to include plugins/animation.gsap.js"),this},ScrollMagic.Scene.prototype.setVelocity=function(){return ScrollMagic._util.log(1,"(ScrollMagic.Scene) -> ERROR calling setVelocity() due to missing Plugin 'animation.velocity'. Please make sure to include plugins/animation.velocity.js"),this},ScrollMagic.Scene.prototype.removeVelocity=function(){return ScrollMagic._util.log(1,"(ScrollMagic.Scene) -> ERROR calling removeVelocity() due to missing Plugin 'animation.velocity'. Please make sure to include plugins/animation.velocity.js"),this},ScrollMagic});